@inject IJSRuntime JS

<button @onclick=DownloadFile>@DisplayText<span class="oi oi-data-transfer-download ms-1" aria-hidden="true" hidden="@(!ShowIcon)"></span></button>

@code {
    [Parameter]
    public string? Text { get; set; }
    private string DisplayText => Text ?? FileName;

    [Parameter]
    public bool ShowIcon { get; set; } = true;
    [Parameter, EditorRequired]
    public string URL { get; set; } = null!;
    [Parameter, EditorRequired]
    public string FileName { get; set; } = null!;

    private IJSObjectReference? module;
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
		if (firstRender)
			module = await JS.InvokeAsync<IJSObjectReference>("import", "./Components/DownloadButton.razor.js");
		await base.OnAfterRenderAsync(firstRender);
	}

	private async Task DownloadFile()
	{
		if (module is not null)
			await module.InvokeVoidAsync("triggerFileDownload", FileName, URL);
	}
}
