@using System.Text;
@using System.Net.Mime;
@inject HttpClient Http

<IndexSectionBase PositionIndex="@PositionIndex">
	<h3>Contact</h3>

	<button @onclick=SendEmail>Submit</button>

	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum auctor nulla nec tellus bibendum imperdiet. Nam elementum fermentum odio, at posuere dui tristique ac. Donec orci lorem, volutpat eu elit sed, aliquet sodales dolor. Nulla ex turpis, pulvinar sit amet dolor ac, pellentesque luctus tellus. Pellentesque congue elementum tortor, et pharetra metus. Suspendisse dignissim, diam nec malesuada sollicitudin, diam sem sagittis ex, a convallis lacus dolor nec libero. Sed rutrum varius lorem, ut mollis massa laoreet non. Curabitur et tellus est. Suspendisse augue mauris, suscipit non neque et, pretium suscipit erat.</p>

	<p>Sed ut aliquam sapien. Morbi aliquet tincidunt mattis. Donec vehicula, nibh non mollis ullamcorper, enim nulla sagittis velit, sit amet gravida nisi risus id justo. Proin nisi eros, accumsan eget mattis sit amet, accumsan vel neque. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Quisque dapibus ac lorem nec luctus. Phasellus pellentesque tortor vel odio vulputate tristique. Suspendisse turpis urna, viverra a magna vitae, venenatis varius velit. Morbi sit amet risus ipsum. Aenean eget risus laoreet enim porta hendrerit. Proin eget odio interdum, auctor augue sed, aliquam mauris. Cras id justo interdum, tincidunt libero ullamcorper, cursus lacus. Ut ullamcorper, tellus a porta egestas, ipsum nibh accumsan ligula, nec venenatis lacus tellus vitae dolor. Cras vitae congue leo, et efficitur lectus. Proin tempor tortor ligula, non semper enim tincidunt eget.</p>

	<p>Duis neque orci, elementum ac euismod quis, sollicitudin varius tellus. Cras vitae diam ultrices, finibus quam vel, suscipit sem. Etiam efficitur ex nisl. Phasellus et aliquam quam. Nunc scelerisque suscipit urna in dignissim. Proin ante dolor, sagittis in ex ut, rhoncus facilisis eros. Donec vitae leo elementum, efficitur nisl aliquam, bibendum purus. Donec at auctor orci. Sed luctus nibh dolor, non tristique elit vulputate sed. Donec posuere risus nec sapien congue, id ultricies mi maximus. Nunc ipsum orci, placerat in turpis in, vehicula congue risus. Donec luctus nulla et nulla tempus malesuada. Praesent id ex a nibh bibendum semper. Etiam vel sem massa.</p>
</IndexSectionBase>

@code {
	[Parameter, EditorRequired]
	public int PositionIndex { get; set; }

	async Task SendEmail()
	{
		try
		{
			ContactMessage message = new()
				{
					Name = "test",
					Email = "test@WilliamSullivan.dev",
					Message = "test",
				};

			var response = await Http.PostAsJsonAsync("/api/SendMessage", message) ?? new() { };
			Console.WriteLine(await response.Content.ReadAsStringAsync());
		}
		catch (Exception ex)
		{
			Console.WriteLine(ex.ToString());
		}
	}
}
